{% extends 'reference/_index_base.html' %}

{% block title_text %}–ü–æ–ª—è{% endblock %}
{% block header_text %}üåæ –ü–æ–ª—è{% endblock %}

<!-- ‚ùå –ü–æ–≤–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è –¥–æ–≤—ñ–¥–Ω–∏–∫–∞ -->
<div class="card shadow-sm rounded-2 border-danger mb-4">
  <div class="card-body">
    <h5 class="card-title text-danger mb-2">‚ùå –ü–æ–≤–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è –¥–æ–≤—ñ–¥–Ω–∏–∫–∞ ¬´–ü–æ–ª—è¬ª</h5>
    <p class="text-muted small mb-3">
      –û–±–µ—Ä–µ–∂–Ω–æ: –Ω–µ–∑–≤–æ—Ä–æ—Ç–Ω–∞ –¥—ñ—è. –ë–µ–∑ ¬´—Ñ–æ—Ä—Å—É¬ª –æ—á–∏—Å—Ç–∫–∞ –∑—É–ø–∏–Ω–∏—Ç—å—Å—è, —è–∫—â–æ –∑–Ω–∞–π–¥–µ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —É –ø–ª–∞–Ω–∞—Ö.
    </p>
    <form method="post" action="{{ url_for('fields.wipe_fields') }}"
          class="row g-2"
          onsubmit="return confirm('–°—Ç–µ—Ä—Ç–∏ –≤—Å—ñ –∑–∞–ø–∏—Å–∏ –¥–æ–≤—ñ–¥–Ω–∏–∫–∞ ¬´–ü–æ–ª—è¬ª? –î—ñ—é –Ω–µ –º–æ–∂–Ω–∞ —Å–∫–∞—Å—É–≤–∞—Ç–∏.');">
      {# —è–∫—â–æ —î Flask-WTF CSRFProtect #}
      {% if csrf_token is defined %}{{ csrf_token() }}{% endif %}
      <div class="col-md-4">
        <input name="confirm" class="form-control" placeholder='–í–≤–µ–¥—ñ—Ç—å: DELETE FIELDS' required>
      </div>
      <div class="col-md-3 form-check d-flex align-items-center">
        <input class="form-check-input me-2" type="checkbox" id="force" name="force" value="1">
        <label class="form-check-label" for="force">—Ñ–æ—Ä—Å (–ø—Ä–∏–±—Ä–∞—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ)</label>
      </div>
      <div class="col-md-3">
        <button class="btn btn-outline-danger w-100">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏ –¥–æ–≤—ñ–¥–Ω–∏–∫</button>
      </div>
    </form>
  </div>
</div>

{% block filter_form %}
<form method="get" class="d-flex flex-wrap mb-3">
  {{ form.hidden_tag() }}
  <div class="me-2">
    {{ form.cluster.label }}
    {{ form.cluster(class="form-select") }}
  </div>
  <div class="me-2">
    {{ form.company.label }}
    {{ form.company(class="form-select") }}
  </div>
  <div class="me-2">
    {{ form.culture.label }}
    {{ form.culture(class="form-select") }}
  </div>
  <div class="me-2 align-self-end">
    {{ form.submit(class="btn btn-primary") }}
  </div>
</form>
{% endblock %}

{% block table_headers %}
  <th>ID</th>
  <th>–ù–∞–∑–≤–∞</th>
  <th>–ö–ª–∞—Å—Ç–µ—Ä</th>
  <th>–ü—ñ–¥–ø—Ä–∏—î–º—Å—Ç–≤–æ</th>
  <th>–ö—É–ª—å—Ç—É—Ä–∞</th>
  <th>–ü–ª–æ—â–∞</th>
  <th>–î—ñ—ó</th>
{% endblock %}

{% block table_rows %}
  {% for field in items %}
  <tr>
    <td>{{ field.id }}</td>
    <td>{{ field.name }}</td>
    <td>{{ field.cluster.name if field.cluster else '' }}</td>
    <td>{{ field.company.name if field.company else '' }}</td>
    <td>{{ field.culture.name if field.culture else '' }}</td>
    <td>{{ field.area }}</td>
    <td>
      <a href="{{ url_for('fields.edit', id=field.id) }}" class="btn btn-sm btn-primary">‚úèÔ∏è</a>
      <form action="{{ url_for('fields.delete', id=field.id) }}" method="post" style="display:inline-block;" onsubmit="return confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ?')">
        <button type="submit" class="btn btn-sm btn-danger">üóëÔ∏è</button>
      </form>
    </td>
  </tr>
  {% else %}
  <tr>
    <td colspan="7">–î–∞–Ω–∏—Ö –Ω–µ–º–∞—î</td>
  </tr>
  {% endfor %}
{% endblock %}
