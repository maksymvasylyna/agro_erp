{% extends 'base.html' %}

{% block title %}{% block title_text %}–§–æ—Ä–º–∞{% endblock %}{% endblock %}
{% block header %}{% block header_text %}üìù –§–æ—Ä–º–∞{% endblock %}{% endblock %}

{% block content %}
{% from _self import render_field %}

<div class="d-flex justify-content-between mb-3">
  <a href="{% block back_url %}#{% endblock %}" class="btn btn-outline-secondary">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</a>
  <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">üè† –ù–∞ –≥–æ–ª–æ–≤–Ω—É</a>
</div>

{# ‚ö†Ô∏è CSRF-–ø–æ–º–∏–ª–∫–∏ (—è–∫—â–æ –≤–∏–Ω–∏–∫–Ω—É—Ç—å) #}
{% if form.csrf_token is defined and form.csrf_token.errors %}
  <div class="alert alert-danger">
    {{ form.csrf_token.errors|join(', ') }}
  </div>
{% endif %}

<form method="POST" class="row g-3" novalidate>
  {{ form.hidden_tag() }}

  {# üîß –ü–æ–ª—è —Ñ–æ—Ä–º–∏. –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º ‚Äî —Ç—ñ–ª—å–∫–∏ "name". –ü–µ—Ä–µ–∫—Ä–∏–π —É –¥–æ—á—ñ—Ä–Ω—ñ—Ö —à–∞–±–ª–æ–Ω–∞—Ö. #}
  {% block form_fields %}
    <div class="col-md-12">
      {{ render_field(form.name) }}
    </div>
  {% endblock %}

  <div class="col-12">
    {{ form.submit(class="btn btn-success") }}
  </div>
</form>

{% endblock %}

{# ================= MACROS ================= #}
{% macro render_field(field, label_text=None) -%}
  {% set is_select = 'Select' in field.type %}
  {% set base_class = 'form-select' if is_select else 'form-control' %}
  {% set classes = base_class + (' is-invalid' if field.errors else '') %}

  <label class="form-label">{{ label_text or field.label.text }}</label>
  {{ field(class=classes) }}
  {% for err in field.errors %}
    <div class="invalid-feedback d-block">{{ err }}</div>
  {% endfor %}
{%- endmacro %}
